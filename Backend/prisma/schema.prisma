generator client {
  provider = "prisma-client-js"

}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
enum Plan {
  FREE
  STANDARD
  PREMIUM
}
enum Role{
  ADMIN
  OWNER
  MEMBER
}


model User {
  id                  String     @id @default(uuid())
  full_name           String?
  username            String?    @unique
  email               String     @unique
  password_hash       String?
  google_id           String?    @unique
  github_id           String?    @unique
  avatar_url          String?
  bio                 String?
  role                String?
  plan                Plan       @default(FREE)
  workspaceMembers    WorkspaceMember[]
  joined_at           DateTime   @default(now())
  last_active         DateTime?  @default(now())
  deleted             Boolean    @default(false)
  deleted_at           DateTime?
}
model Workspace {
  id                  String     @id @default(uuid())
  name                String
  slug                String?
  owner_id            String
  created_at          DateTime   @default(now())
  plan                Plan       @default(FREE)
  logo_url            String?
  workspaceMembers    WorkspaceMember[]
  deleted             Boolean    @default(false)
  deleted_at          DateTime?
}

model WorkspaceMember {
  userId      String
  workspaceId String
  user        User      @relation(fields: [userId], references: [id])
  workspace   Workspace @relation(fields: [workspaceId], references: [id])
  role        Role      @default(MEMBER)
  joined_at   DateTime  @default(now())
  @@id([userId, workspaceId])
}
